import{l as _,r as o,o as G,w as J,a as Q,b as l,c as Y,d as b,n as g,e as y,f as t,g as c,u as Z,i as tt,h as i,j as x,m as p,k,p as D,v as P,q as et,s as A,t as r,F as N,x as u}from"./app-d8ea3ead.js";import{f as at,a as ot,b as st,c as lt,d as nt,e as it,j as dt,k as ct,A as rt,L as mt}from"./AppLayout-a0a6f737.js";import"./sweetalert2.all-0277b68c.js";import{V as v}from"./mixins-d3422c03.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";import"./_plugin-vue_export-helper-c27b6911.js";const _t={class:"header pb-6"},ut={class:"container-fluid"},vt={class:"header-body row"},pt={class:"col-lg-8 align-items-center py-4"},ht=t("h6",{class:"h2 text-maroon d-inline-block mb-0"}," Location Management",-1),ft={"aria-label":"breadcrumb",class:"d-none d-md-block"},bt={class:"breadcrumb breadcrumb-links breadcrumb-dark"},gt={class:"breadcrumb-item"},yt=t("li",{class:"breadcrumb-item active breadcrumb-yellow","aria-current":"page"}," Location Management ",-1),xt={class:"col-lg-4 text-right py-4"},kt={key:0,href:"javascript:void(0)","data-toggle":"modal","data-target":"#importLocations",class:"btn btn-sm btn-neutral float-end text-maroon"},wt=["onClick"],Ct={class:"row"},Lt={class:"col-lg-12"},Mt={class:"card shadow"},Tt={class:"py-3 filters-margin mx-3 text-sm card-body"},Et={class:"flex"},Nt={class:"items-center text-muted"},Vt=t("div",{class:""},"Search:",-1),St={class:"inline-block"},Dt={class:"flex text-muted ml-auto mt-auto"},At={class:"inline-block"},It=["value","textContent"],Ot={class:"row mx-4"},$t={class:"table-responsive"},jt={class:"table"},Pt=t("th",{class:"textClassHead text-start"},"Code",-1),Bt=["onClick"],Ft={class:"flex mt-1 px-3 mx-1 card-footer table-footer align-items-center"},Ut={class:"col-sm-12 col-md-6 p-0"},Ht={class:"dataTables_info column__left___padding",id:"DataTables_Table_0_info",role:"status","aria-live":"polite"},Rt={class:"col-sm-12 col-md-6 p-0"},Wt={class:"dataTables_paginate paging_simple_numbers column__right___padding",id:"DataTables_Table_0_paginate"},qt={"aria-label":"Page navigation",style:{float:"right"}},zt={class:"pagination"},Kt=t("i",{class:"fa-solid fa-angles-left"},null,-1),Xt=[Kt],Gt=["onClick"],Jt=t("i",{class:"fa-solid fa-angles-right"},null,-1),Qt=[Jt],Yt={class:"modal fade",id:"newLocationModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"newLocationModal","aria-hidden":"true"},Zt={class:"modal-dialog modal-dialog-centered modal-md",role:"document"},te={class:"modal-content"},ee={class:"modal-header"},ae=t("h5",{class:"modal-title font-weight-bolder breadcrumb-yellow text-gradient title_modal",id:"add_brandLabel"}," NEW LOCATION",-1),oe={type:"button",class:"close btn","data-dismiss":"modal","aria-label":"Close"},se={"aria-hidden":"true"},le={class:"modal-body pb-2 mt-0 pt-0"},ne={class:"card-plain"},ie={class:""},de=["onSubmit"],ce={class:"row mb-1"},re=t("div",{for:"name",class:"col-md-3 col-form-label"},"NAME",-1),me={class:"col-md-9"},_e={key:0,id:"msg_name",class:"text-danger form-text text-error-msg error"},ue={class:"text-right mt-2"},ve={type:"submit",class:"btn btn-round btn-outline-primary btn-sm mb-0"},pe={class:"modal fade",id:"importLocations","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"importLocations","aria-hidden":"true"},he={class:"modal-dialog modal-dialog-centered modal-md",role:"document"},fe={class:"modal-content"},be={class:"modal-header"},ge=t("h5",{class:"modal-title font-weight-bolder breadcrumb-yellow text-gradient title_modal",id:"add_brandLabel"}," IMPORT LOCATIONS ",-1),ye={type:"button",class:"close btn","data-dismiss":"modal","aria-label":"Close"},xe={"aria-hidden":"true"},ke={class:"p-1 modal-body"},we={class:"card-plain"},Ce={key:0,class:"m-2 card-body"},Le=["onSubmit"],Me={class:"mb-1 row"},Te=t("div",{for:"barcode",class:"col-md-10 col-form-label",style:{"margin-top":"-50px"}}," EXCEL FILE ",-1),Ee={class:"col-md-10",style:{"margin-top":"-20px"}},Ne={class:"error"},Ve={key:0,class:"mt-1 text-sm text-danger form-text text-error-msg error"},Se={class:"mt-2 text-right"},De=["onClick"],Ae={key:0,type:"submit",class:"mb-0 btn btn-outline-primary btn-sm btn-round"},Ie={key:1,class:"m-2 card-body"},Oe=t("div",{class:"loading"},[t("div",{class:"loading-text"},[t("div",{class:"spinner-border text-maroon",role:"status"},[t("span",{class:"sr-only"},"Loading...")]),t("div",{class:"text-maroon"},"Uploading...")])],-1),$e=[Oe],qe={__name:"index",setup(je){_.add(at),_.add(ot),_.add(st),_.add(lt),_.add(nt),_.add(it),_.add(dt),_.add(ct);const B=o("text-start text-uppercase");o("text-center text-uppercase");const I=o("text-start");o("text-center"),o("text-center"),o("text-center");const F=o("cursor-pointer"),w=o(null),C=o(1),U=o([25,50,100]),L=o(25),n=o({}),h=o({}),V=o([]),M=o(0),T=o(null);o(null);const E=o({}),m=o(null),S=async a=>{C.value=a,f()},H=()=>{C.value=1,f()},R=async()=>{f()},f=async()=>{g(()=>{m.value.start()});try{const a=(await y.get(route("location.all"),{params:{page:C.value,per_page:L.value,"filter[search]":w.value}})).data;V.value=a.data,n.value=a.meta,g(()=>{m.value.finish()})}catch(a){v.methods.convertValidationNotification(a)}},W=async()=>{v.methods.resetValidationErrors();try{await y.post(route("location.store"),h.value),f(),$("#newLocationModal").modal("hide"),h.value={},v.methods.successMessage("Location created successfully")}catch(a){v.methods.convertValidationNotification(a)}},q=async a=>{v.methods.resetValidationErrors();try{window.location.href=route("location.edit",a)}catch(s){v.methods.convertValidationError(s)}},z=()=>{m.value.start(),h.value={},$("#newLocationModal").modal("show"),m.value.finish()},O=async()=>{g(()=>{m.value.start()});try{const a=await y.get(route("location.all"));V.value=a.data.data,n.value=a.data.meta,g(()=>{m.value.finish()})}catch(a){console.error(a.message),g(()=>{m.value.finish()})}},K=async()=>{try{M.value=1;const a=(await y.post(route("location.import"),{location_file:T.value},{headers:{"Content-Type":"multipart/form-data"}})).data;v.methods.successMessage("Location imported successfully"),M.value=0,$("#importLocations").modal("hide"),T.value=null,O()}catch(a){M.value=0,console.error(a.message)}},X=async()=>{try{const s=(await y.post(route("location.sample.export"))).data,d="/storage/excel/sample-location/"+s,e=document.createElement("a");e.href=d,e.setAttribute("download",s+".xlsx"),document.body.appendChild(e),e.click()}catch(a){console.error(a.message)}};return G(()=>{O()}),J([w,C,L],()=>{f()}),(a,s)=>{const d=Q("font-awesome-icon");return l(),Y(rt,{title:"Location Management"},{header:b(()=>[t("div",_t,[t("div",ut,[t("div",vt,[t("div",pt,[ht,t("nav",ft,[t("ol",bt,[t("li",gt,[c(Z(tt),{href:"/"},{default:b(()=>[c(d,{icon:"fa-solid fa-house",class:"text-maroon"})]),_:1})]),yt])])]),t("div",xt,[a.can("import_location")?(l(),i("a",kt,[c(d,{icon:"fa-solid fa-file-import"}),x(" IMPORT ")])):p("",!0),a.can("create_location")?(l(),i("a",{key:1,href:"javascript:void(0)",onClick:k(z,["prevent"]),class:"btn btn-sm btn-neutral float-end text-maroon"},[c(d,{icon:"fa-solid fa-circle-plus"}),x(" ADD NEW ")],8,wt)):p("",!0)])])])])]),content:b(()=>[t("div",Ct,[t("div",Lt,[t("div",Mt,[t("div",Tt,[t("div",Et,[t("div",Nt,[Vt,t("div",St,[D(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[0]||(s[0]=e=>w.value=e),onKeyup:H},null,544),[[P,w.value]])])]),t("div",Dt,[t("div",At,[D(t("select",{class:"form-control form-control-sm per-page-entry",value:25,"onUpdate:modelValue":s[1]||(s[1]=e=>L.value=e),onChange:R},[(l(!0),i(N,null,A(U.value,e=>(l(),i("option",{key:e,value:e,textContent:r(e)},null,8,It))),128))],544),[[et,L.value]])])])])]),t("div",Ot,[t("div",$t,[t("table",jt,[t("thead",null,[t("tr",null,[Pt,t("th",{class:u(B.value)},"Name",2)])]),t("tbody",null,[(l(!0),i(N,null,A(V.value,e=>(l(),i("tr",{key:e.id,class:u(F.value),onClick:k(j=>q(e.id),["prevent"])},[t("td",{class:u(I.value)},r(e.code),3),t("td",{class:u(I.value)},r(e.name),3)],10,Bt))),128))])])])]),t("div",Ft,[t("div",Ut,[t("div",Ht," Showing "+r(n.value.from)+" to "+r(n.value.to)+" of "+r(n.value.total)+" entries ",1)]),t("div",Rt,[t("div",Wt,[t("nav",qt,[t("ul",zt,[t("li",{class:u(["page-item",n.value.current_page==1?"disabled":""])},[t("a",{class:"page-link",href:"javascript:void(0)",onClick:s[2]||(s[2]=e=>S(n.value.current_page-1))},Xt)],2),(l(!0),i(N,null,A(n.value.last_page,(e,j)=>(l(),i(N,null,[e==1||e==n.value.last_page||Math.abs(e-n.value.current_page)<5?(l(),i("li",{class:u(["page-item",n.value.current_page==e?"active":""]),key:j},[t("a",{class:"page-link",onClick:Pe=>S(e)},r(e),9,Gt)],2)):p("",!0)],64))),256)),t("li",{class:u(["page-item",n.value.current_page==n.value.last_page?"disabled":""])},[t("a",{class:"page-link",href:"javascript:void(0)",onClick:s[3]||(s[3]=e=>S(n.value.current_page+1))},Qt)],2)])])])])])])])])]),modals:b(()=>[t("div",Yt,[t("div",Zt,[t("div",te,[t("div",ee,[ae,t("button",oe,[t("span",se,[c(d,{icon:"fa-solid fa-xmark"})])])]),t("div",le,[t("div",ne,[t("div",ie,[t("form",{role:" text-left",onSubmit:k(W,["prevent"]),enctype:"multipart/form-data"},[t("div",ce,[re,t("div",me,[D(t("input",{type:"text",class:"form-control form-control-sm",name:"name",id:"name","onUpdate:modelValue":s[4]||(s[4]=e=>h.value.name=e),placeholder:"Name",required:""},null,512),[[P,h.value.name]]),E.value.name?(l(),i("small",_e,r(E.value.name),1)):p("",!0)])]),t("div",ue,[t("button",ve,[c(d,{icon:"fa-solid fa-floppy-disk"}),x(" CREATE ")])])],40,de)])])])])])]),t("div",pe,[t("div",he,[t("div",fe,[t("div",be,[ge,t("button",ye,[t("span",xe,[c(d,{icon:"fa-solid fa-xmark"})])])]),t("div",ke,[t("div",we,[M.value==0?(l(),i("div",Ce,[t("form",{role:"form text-left",onSubmit:k(K,["prevent"]),enctype:"multipart/form-data"},[t("div",Me,[Te,t("div",Ee,[t("input",{type:"file",ref:"file",class:"form-control form-control-sm pl-0",style:{border:"none"},onInput:s[5]||(s[5]=e=>T.value=e.target.files[0])},null,544),t("div",Ne,[E.value.location_file?(l(),i("small",Ve,r(E.value.location_file),1)):p("",!0)])])]),t("div",Se,[t("a",{href:"javascript:void(0)",onClick:k(X,["prevent"]),class:"btn btn-sm btn-outline-success float-end"},[c(d,{icon:"fa-solid fa-download"}),x(" SAMPLE DOWNLOAD ")],8,De),T.value?(l(),i("button",Ae,[c(d,{icon:"fa-solid fa-floppy-disk"}),x(" SUBMIT ")])):p("",!0)])],40,Le)])):(l(),i("div",Ie,$e))])])])])])]),loader:b(()=>[c(mt,{ref_key:"loading_bar",ref:m},null,512)]),_:1})}}};export{qe as default};
