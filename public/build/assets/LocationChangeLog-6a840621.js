import{l as v,r as o,o as te,w as I,a as se,b as i,c as oe,d as T,n as f,e as b,f as e,g as y,u as P,i as le,h as u,j as ne,k as j,m as K,p as V,v as U,q as ce,s as S,t as r,F as L,x as l,z as re,A as ie}from"./app-d8ea3ead.js";import{f as de,a as _e,b as ue,c as ve,d as pe,e as me,l as he,A as ge,L as fe}from"./AppLayout-a0a6f737.js";import{S as be}from"./sweetalert2.all-0277b68c.js";import{s as ye}from"./vue-multiselect.esm-0bbce239.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";const p=k=>(re("data-v-e737b6e7"),k=k(),ie(),k),xe={class:"header pb-6"},Ce={class:"container-fluid"},we={class:"header-body row"},Te={class:"col-lg-8 align-items-center py-4"},Le=p(()=>e("h6",{class:"h2 text-maroon d-inline-block mb-0"}," Assets Location Change Log",-1)),Ae={"aria-label":"breadcrumb",class:"d-none d-md-block"},Ee={class:"breadcrumb breadcrumb-links breadcrumb-dark"},Oe={class:"breadcrumb-item"},Ve=p(()=>e("li",{class:"breadcrumb-item active breadcrumb-yellow","aria-current":"page"}," Assets Location Change Log ",-1)),Se={class:"col-lg-4 text-right py-4"},De=["onClick"],Re={class:"row"},Me={class:"col-lg-12"},Be={class:"card shadow"},Ne={class:"row filters-margin mb-2 mx-2 py-2"},Fe={class:"col-md-3 column__right___padding"},Ie=p(()=>e("div",{for:"purchase_uom",class:"col-form-label"},"TASK CODE",-1)),Pe={class:"col-md-3 column__left___padding column__right___padding"},je=p(()=>e("div",{for:"purchase_uom",class:"col-form-label"},"QR CODE",-1)),Ke={class:"col-md-3 column__right___padding"},Ue=p(()=>e("div",{for:"purchase_uom",class:"col-form-label"},"CATEGORY ",-1)),$e={class:"col-md-2 mt-4 column__left___padding"},Qe=["onClick"],ze={class:"flex text-muted ml-auto mt-auto mr-3"},Ge={class:"inline-block"},He=["value","textContent"],Ye={class:"row mx-4"},qe={class:"table-responsive"},Xe={class:"table"},Je={class:"flex mt-1 px-3 mx-1 card-footer table-footer align-items-center"},We={class:"col-sm-12 col-md-6 p-0"},Ze={class:"dataTables_info column__left___padding",id:"DataTables_Table_0_info",role:"status","aria-live":"polite"},ea={class:"col-sm-12 col-md-6 p-0"},aa={class:"dataTables_paginate paging_simple_numbers column__right___padding",id:"DataTables_Table_0_paginate"},ta={"aria-label":"Page navigation",style:{float:"right"}},sa={class:"pagination"},oa=p(()=>e("i",{class:"fa-solid fa-angles-left"},null,-1)),la=[oa],na=["onClick"],ca=p(()=>e("i",{class:"fa-solid fa-angles-right"},null,-1)),ra=[ca],ia={__name:"LocationChangeLog",setup(k){v.add(de),v.add(_e),v.add(ue),v.add(ve),v.add(pe),v.add(me),v.add(he);const m=o("text-start text-uppercase");o("text-center text-uppercase");const h=o("text-start");o("text-center"),o("text-center"),o("text-center");const $=o("cursor-pointer"),D=o(null),x=o(1),Q=o([25,50,100]),C=o(25),n=o({});o({}),o({});const A=o([]),w=o(null),R=o(null),M=o([]),z=o([]),c=o({}),B=o(null),N=o({}),d=o(null),F=()=>{N.value={},B.value=null},G=a=>{if(F(),!(a.response&&a.response.data))return;const{message:s}=a.response.data;Y(s)},H=a=>{if(F(),!(a.response&&a.response.data))return;const{message:s,errors:_}=a.response.data;if(B.value=s,_)for(const t in _)N.value[t]=_[t][0]},Y=a=>{be.fire({icon:"error",title:"Oops...",text:a,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},q=async()=>{f(()=>{d.value.start()});try{const a=await b.get(route("location_change_log.all"));A.value=a.data.data,n.value=a.data.meta,f(()=>{d.value.finish()})}catch(a){console.error(a.message),f(()=>{d.value.finish()})}},E=async a=>{x.value=a,g()},O=()=>{x.value=1,g()},X=async()=>{g()},g=async()=>{f(()=>{d.value.start()});try{const a=(await b.get(route("location_change_log.all"),{params:{page:x.value,per_page:C.value,"filter[search]":D.value,search_log_barcode:c.value.barcode,search_log_task_code:c.value.task_code,search_log_category:c.value.category}})).data;A.value=a.data,n.value=a.meta,f(()=>{d.value.finish()})}catch(a){G(a)}},J=()=>{c.value={},w.value=null,R.value=null,g()},W=async()=>{try{const a=await b.get(route("category.all"));M.value=a.data.data}catch(a){console.error(a.message)}},Z=async()=>{try{const a=await b.get(route("task.all"));z.value=a.data.data}catch(a){console.error(a.message)}},ee=async()=>{d.value.start();try{const s=(await b.post(route("location.change.log.export"),c.value)).data,_="/storage/excel/location_change_log/"+s,t=document.createElement("a");t.href=_,t.setAttribute("download",s+".xlsx"),document.body.appendChild(t),t.click()}catch(a){H(a)}d.value.finish()};return te(()=>{q(),W(),Z()}),I([D,x,C],()=>{g()}),I(()=>{const a=w.value;a&&(c.value.category=a.id);const s=R.value;s&&(c.value.task_code=s.id),(a||s)&&O()}),(a,s)=>{const _=se("font-awesome-icon");return i(),oe(ge,{title:"Assets"},{header:T(()=>[e("div",xe,[e("div",Ce,[e("div",we,[e("div",Te,[Le,e("nav",Ae,[e("ol",Ee,[e("li",Oe,[y(P(le),{href:"/"},{default:T(()=>[y(_,{icon:"fa-solid fa-house",class:"text-maroon"})]),_:1})]),Ve])])]),e("div",Se,[a.can("export_location_change_log")?(i(),u("a",{key:0,href:"javascript:void(0)",onClick:j(ee,["prevent"]),class:"btn btn-sm btn-neutral float-end text-maroon"},[y(_,{icon:"fa-solid fa-file-export"}),ne(" EXPORT ")],8,De)):K("",!0)])])])])]),content:T(()=>[e("div",Re,[e("div",Me,[e("div",Be,[e("div",Ne,[e("div",Fe,[Ie,V(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[0]||(s[0]=t=>c.value.task_code=t),placeholder:"Task Code",onKeyup:O},null,544),[[U,c.value.task_code]])]),e("div",Pe,[je,V(e("input",{type:"text",class:"form-control form-control-sm",name:"code",id:"code","onUpdate:modelValue":s[1]||(s[1]=t=>c.value.barcode=t),placeholder:"QR Code",onKeyup:O},null,544),[[U,c.value.barcode]])]),e("div",Ke,[Ue,y(P(ye),{modelValue:w.value,"onUpdate:modelValue":s[2]||(s[2]=t=>w.value=t),options:M.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Category",label:"name","track-by":"id"},null,8,["modelValue","options"])]),e("div",$e,[e("a",{href:"javascript:void(0)",onClick:j(J,["prevent"]),class:"btn btn-sm btn-ash float-end mt-2 pt-2"}," CLEAR ",8,Qe)]),e("div",ze,[e("div",Ge,[V(e("select",{class:"form-control form-control-sm per-page-entry",value:25,"onUpdate:modelValue":s[3]||(s[3]=t=>C.value=t),onChange:X},[(i(!0),u(L,null,S(Q.value,t=>(i(),u("option",{key:t,value:t,textContent:r(t)},null,8,He))),128))],544),[[ce,C.value]])])])]),e("div",Ye,[e("div",qe,[e("table",Xe,[e("thead",null,[e("tr",null,[e("th",{class:l([m.value,"pl-3"])},"TASK CODE",2),e("th",{class:l(m.value)},"QR CODE",2),e("th",{class:l(m.value)},"CATEGORY",2),e("th",{class:l(m.value)},"FROM LOCATION",2),e("th",{class:l(m.value)},"TO LOCATION",2),e("th",{class:l([m.value,"col-width"])},"CREATED AT",2)])]),e("tbody",null,[(i(!0),u(L,null,S(A.value,t=>(i(),u("tr",{key:t.id,class:l($.value)},[e("td",{class:l([h.value,"pl-3"])},r(t.task_code),3),e("td",{class:l(h.value)},r(t.barcode),3),e("td",{class:l(h.value)},r(t.category_name),3),e("td",{class:l(h.value)},r(t.from_location_name),3),e("td",{class:l(h.value)},r(t.to_location_name),3),e("td",{class:l([h.value,"col-width"])},r(t.created_date),3)],2))),128))])])])]),e("div",Je,[e("div",We,[e("div",Ze," Showing "+r(n.value.from)+" to "+r(n.value.to)+" of "+r(n.value.total)+" entries ",1)]),e("div",ea,[e("div",aa,[e("nav",ta,[e("ul",sa,[e("li",{class:l(["page-item",n.value.current_page==1?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:s[4]||(s[4]=t=>E(n.value.current_page-1))},la)],2),(i(!0),u(L,null,S(n.value.last_page,(t,ae)=>(i(),u(L,null,[t==1||t==n.value.last_page||Math.abs(t-n.value.current_page)<5?(i(),u("li",{class:l(["page-item",n.value.current_page==t?"active":""]),key:ae},[e("a",{class:"page-link",onClick:da=>E(t)},r(t),9,na)],2)):K("",!0)],64))),256)),e("li",{class:l(["page-item",n.value.current_page==n.value.last_page?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:s[5]||(s[5]=t=>E(n.value.current_page+1))},ra)],2)])])])])])])])])]),loader:T(()=>[y(fe,{ref_key:"loading_bar",ref:d},null,512)]),_:1})}}},ga=ke(ia,[["__scopeId","data-v-e737b6e7"]]);export{ga as default};
