import{K as Q,l as g,r as u,B as X,o as Z,a as ee,b as l,c as te,d as C,n as w,e as h,f as e,g as m,u as V,i as O,j as y,t as r,h as n,m as _,k as U,p as x,v as k,q as se,s as D,F as L,x as p}from"./app-d8ea3ead.js";import{f as oe,a as ae,b as le,c as ne,d as ie,e as re,A as de,L as ce}from"./AppLayout-a0a6f737.js";import{S as B}from"./sweetalert2.all-0277b68c.js";import{s as ue}from"./vue-multiselect.esm-0bbce239.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";import"./_plugin-vue_export-helper-c27b6911.js";const me={class:"header pb-6"},_e={class:"container-fluid"},pe={class:"header-body row"},ve={class:"col-lg-8 align-items-center py-4"},he=e("h6",{class:"h2 text-maroon d-inline-block mb-0"}," User Management",-1),fe={"aria-label":"breadcrumb",class:"d-none d-md-block"},be={class:"breadcrumb breadcrumb-links breadcrumb-dark"},ge={class:"breadcrumb-item"},we={class:"breadcrumb-item"},ye={class:"breadcrumb-item active text-maroon","aria-current":"page"},xe=e("div",{class:"col-lg-4 text-right py-4"},null,-1),Ce={class:"row my-2 mx-2"},ke={class:"col-lg-2 col-md-2"},Be={class:"nav-wrapper-loc"},Ae={class:"nav nav-pills nav-fill flex-column",id:"tabs-icons-text",role:"tablist"},Te=e("li",{class:"mb-2 nav-item"},[e("a",{class:"nav-link active font-weight-400",id:"customer-data-tab","data-toggle":"tab",href:"#customer-data",role:"tab","aria-controls":"customer-data","aria-selected":"true"}," Basic Data")],-1),Ue=e("li",{class:"mb-2 nav-item"},[e("a",{class:"nav-link font-weight-400",id:"password-data-tab","data-toggle":"tab",href:"#password-data",role:"tab","aria-controls":"password-data","aria-selected":"true"}," Password")],-1),Le={key:0,class:"mb-2 nav-item"},Pe=e("a",{class:"nav-link font-weight-400",id:"location-data-tab","data-toggle":"tab",href:"#location-data",role:"tab","aria-controls":"location-data","aria-selected":"true"}," Location",-1),Se=[Pe],Ve=e("li",{hidden:""},null,-1),De={class:"col-lg-10 col-md-10"},Me={class:"shadow card"},Ee={class:"card-body"},Ne={class:"tab-content",id:"myTabContent"},Ie={class:"tab-pane fade show active",id:"customer-data",role:"tabpanel"},Oe={class:""},Ye=e("div",{class:"mt-2 mx-2"},[e("div",{class:"row mt-0"},[e("div",{class:"h3 col-12 text-dark"}," Basic Data ")])],-1),je={class:"card-body px-2"},Re=["onSubmit"],$e={class:"row mb-1"},Fe=e("div",{for:"name",class:"col-md-3 col-form-label"},"NAME",-1),He={class:"col-md-9"},We=["disabled"],qe={key:0,id:"name",class:"text-danger form-text text-error-msg error"},ze={class:"row mb-1"},Ke=e("div",{for:"email",class:"col-md-3 col-form-label"},"EMAIL",-1),Ge={class:"col-md-9"},Je=["disabled"],Qe={key:0,id:"email",class:"text-danger form-text text-error-msg error"},Xe={class:"row mb-1"},Ze=e("div",{for:"telephone",class:"col-md-3 col-form-label"},"CONTACT NO.",-1),et={class:"col-md-9"},tt=["disabled"],st={key:0,id:"telephone",class:"text-danger form-text text-error-msg error"},ot={class:"text-right mt-2"},at={key:2,type:"submit",class:"btn btn-round btn-outline-success btn-sm mb-0"},lt={class:"tab-pane fade show",id:"password-data",role:"tabpanel"},nt={class:""},it=e("div",{class:"mx-2"},[e("div",{class:"row mt-2 pb-0"},[e("div",{class:"h3 col-12 text-dark"}," Password Update ")])],-1),rt={class:"card-body px-2"},dt=["onSubmit"],ct={class:"row mb-1"},ut=e("div",{for:"password",class:"col-md-3 col-form-label"},"PASSWORD",-1),mt={class:"col-md-9"},_t=["disabled"],pt={key:0,id:"password",class:"text-danger form-text text-error-msg error"},vt={class:"row mb-1"},ht=e("div",{for:"con_password",class:"col-md-3 col-form-label"},"CONFIRM PASSWORD",-1),ft={class:"col-md-9"},bt=["disabled"],gt={key:0,id:"con_password",class:"text-danger form-text text-error-msg error"},wt={class:"text-right mt-2"},yt={key:0,type:"submit",class:"btn btn-round btn-outline-success btn-sm mb-0"},xt={class:"tab-pane fade show",id:"location-data",role:"tabpanel"},Ct={class:""},kt=e("div",{class:"mx-2"},[e("div",{class:"row mt-2 pb-0"},[e("div",{class:"h3 col-12 text-dark ml-1"}," Assign Location ")])],-1),Bt={class:"card-body px-2"},At=["onSubmit"],Tt={class:"row mb-1"},Ut=e("div",{for:"location",class:"col-md-1 col-form-label pr-0 ml-1"},"LOCATION ",-1),Lt={class:"col-md-4 pr-2 pl-0"},Pt={key:0,id:"msg_location_id_id",class:"text-danger form-text text-error-msg error"},St={class:"col-md-2 px-0",style:{"margin-top":"2px"}},Vt={key:0,type:"submit",class:"btn btn-round btn-outline-primary btn-sm mb-0"},Dt={class:"col-md-4 p-0",style:{"margin-left":"55px"}},Mt={class:"d-flex justify-content-end"},Et={class:"inline-block"},Nt=["value","textContent"],It={class:"row mx-1 mt-3"},Ot={class:"table-responsive"},Yt={class:"table"},jt=["onClick"],Rt={class:"flex mt-1 px-3 mx-1 card-footer table-footer align-items-center"},$t={class:"col-sm-12 col-md-6 p-0"},Ft={class:"dataTables_info column__left___padding",id:"DataTables_Table_0_info",role:"status","aria-live":"polite"},Ht={class:"col-sm-12 col-md-6 p-0"},Wt={class:"dataTables_paginate paging_simple_numbers column__right___padding",id:"DataTables_Table_0_paginate"},qt={"aria-label":"Page navigation",style:{float:"right"}},zt={class:"pagination"},Kt=e("i",{class:"fa-solid fa-angles-left"},null,-1),Gt=[Kt],Jt=["onClick"],Qt=e("i",{class:"fa-solid fa-angles-right"},null,-1),Xt=[Qt],is={__name:"edit",setup(Zt){const{props:f}=Q();g.add(oe),g.add(ae),g.add(le),g.add(ne),g.add(ie),g.add(re);const a=u({}),A=u(null),M=u([]);u([]);const E=u([]);u(1);const Y=u([25,50,100]),N=u(25),d=u({}),j=u(null),c=u({}),i=u(null),T=()=>{c.value={},j.value=null},b=t=>{if(T(),!(t.response&&t.response.data))return;const{message:o}=t.response.data;R(o)},P=t=>{B.fire({icon:"success",title:"Success",text:t,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},R=t=>{B.fire({icon:"error",title:"Oops...",text:t,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},$=async()=>{i.value.start(),T();try{await h.post(route("user.update",f.userId),a.value),P("User updated successfully"),i.value.finish()}catch(t){b(t),i.value.finish()}},F=async()=>{i.value.start(),T();try{await h.post(route("user.password.update",f.userId),a.value),P("User password updated successfully"),i.value.finish()}catch(t){b(t),i.value.finish()}},H=async()=>{i.value.start(),T();try{const t=A.value.id,o=f.userId,s={location_id:t==="all"?0:t,user_id:o};await h.post(route("user.assign.location"),s),P("Location Assign successfully"),S(),A.value=null,i.value.finish()}catch(t){b(t),i.value.finish()}},S=async()=>{w(()=>{i.value.start()});try{const t=await h.get(route("user.assignLocation.all",f.userId));E.value=t.data.data,d.value=t.data.meta,w(()=>{i.value.finish()})}catch(t){console.error(t.message),w(()=>{i.value.finish()})}},W=()=>{try{B.fire({title:"Are you sure?",text:"You wont to restore this user!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#C00202",cancelButtonColor:"#6CA925",confirmButtonText:"Yes, restore it!"}).then(t=>{t.isConfirmed&&h.delete(route("user.restore",f.userId)).then(o=>{window.location.href=route("user.index")})})}catch(t){b(t)}},q=()=>{try{B.fire({title:"Are you sure?",text:"You wont to delete this user!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#C00202",cancelButtonColor:"#6CA925",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&h.delete(route("user.delete",f.userId)).then(o=>{window.location.href=route("user.index")})})}catch(t){b(t)}},z=async()=>{w(()=>{i.value.start()});try{const t=await h.get(route("user.get",f.userId));a.value=t.data.data,w(()=>{i.value.finish()})}catch(t){console.error(t.message),w(()=>{i.value.finish()})}},K=async()=>{try{const t=await h.get(route("location.all"));M.value=t.data.data}catch(t){console.error(t.message)}},G=t=>{try{B.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#C00202",cancelButtonColor:"#6CA925",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&h.post(route("user.location.delete"),t).then(v=>{S()})})}catch(o){b(o)}},J=X(()=>[{id:"all",name:"ALL"},...M.value]);return Z(()=>{K(),S(),z()}),(t,o)=>{const v=ee("font-awesome-icon");return l(),te(de,{title:"User Management"},{header:C(()=>[e("div",me,[e("div",_e,[e("div",pe,[e("div",ve,[he,e("nav",fe,[e("ol",be,[e("li",ge,[m(V(O),{href:"/"},{default:C(()=>[m(v,{icon:"fa-solid fa-house",class:"text-maroon"})]),_:1})]),e("li",we,[m(V(O),{href:"/users",class:"text-maroon"},{default:C(()=>[y(" User Management ")]),_:1})]),e("li",ye,r(a.value.name),1)])])]),xe])])])]),content:C(()=>[e("div",Ce,[e("div",ke,[e("div",Be,[e("ul",Ae,[Te,Ue,t.can("assign_location")?(l(),n("li",Le,Se)):_("",!0),Ve])])]),e("div",De,[e("div",Me,[e("div",Ee,[e("div",Ne,[e("div",Ie,[e("div",Oe,[Ye,e("div",je,[e("form",{role:"form text-left",onSubmit:U($,["prevent"]),enctype:"multipart/form-data"},[e("div",$e,[Fe,e("div",He,[x(e("input",{type:"text",class:"form-control form-control-sm",name:"name",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>a.value.name=s),placeholder:"Name",disabled:a.value.deleted_at!=null},null,8,We),[[k,a.value.name]]),c.value.name?(l(),n("small",qe,r(c.value.name),1)):_("",!0)])]),e("div",ze,[Ke,e("div",Ge,[x(e("input",{type:"text",class:"form-control form-control-sm",name:"email",id:"email","onUpdate:modelValue":o[1]||(o[1]=s=>a.value.email=s),placeholder:"Email Address",disabled:a.value.deleted_at!=null},null,8,Je),[[k,a.value.email]]),c.value.email?(l(),n("small",Qe,r(c.value.email),1)):_("",!0)])]),e("div",Xe,[Ze,e("div",et,[x(e("input",{type:"text",class:"form-control form-control-sm",name:"telephone",id:"telephone","onUpdate:modelValue":o[2]||(o[2]=s=>a.value.telephone=s),placeholder:"Contact No.",disabled:a.value.deleted_at!=null},null,8,tt),[[k,a.value.telephone]]),c.value.telephone?(l(),n("small",st,r(c.value.telephone),1)):_("",!0)])]),e("div",ot,[a.value.deleted_at!=null?(l(),n("button",{key:0,type:"button",class:"btn btn-round btn-outline-warning btn-sm mb-0",onClick:W},[m(v,{icon:"fa-solid fa-arrow-right-rotate"}),y(" RESTORE ")])):(l(),n("button",{key:1,type:"button",class:"btn btn-round btn-outline-danger btn-sm mb-0",onClick:q},[m(v,{icon:"fa-solid fa-trash"}),y(" DELETE ")])),a.value.deleted_at==null?(l(),n("button",at,[m(v,{icon:"fa-solid fa-floppy-disk"}),y(" UPDATE ")])):_("",!0)])],40,Re)])])]),e("div",lt,[e("div",nt,[it,e("div",rt,[e("form",{role:"form text-left",onSubmit:U(F,["prevent"]),enctype:"multipart/form-data"},[e("div",ct,[ut,e("div",mt,[x(e("input",{type:"password",class:"form-control form-control-sm",name:"password",id:"password","onUpdate:modelValue":o[3]||(o[3]=s=>a.value.password=s),placeholder:"Password",disabled:a.value.deleted_at!=null},null,8,_t),[[k,a.value.password]]),c.value.password?(l(),n("small",pt,r(c.value.password),1)):_("",!0)])]),e("div",vt,[ht,e("div",ft,[x(e("input",{type:"password",class:"form-control form-control-sm",name:"con_password",id:"con_password","onUpdate:modelValue":o[4]||(o[4]=s=>a.value.con_password=s),placeholder:"Confirm Password",disabled:a.value.deleted_at!=null},null,8,bt),[[k,a.value.con_password]]),c.value.con_password?(l(),n("small",gt,r(c.value.con_password),1)):_("",!0)])]),e("div",wt,[a.value.deleted_at==null?(l(),n("button",yt,[m(v,{icon:"fa-solid fa-floppy-disk"}),y(" UPDATE ")])):_("",!0)])],40,dt)])])]),e("div",xt,[e("div",Ct,[kt,e("div",Bt,[e("form",{role:"form text-left",onSubmit:U(H,["prevent"]),enctype:"multipart/form-data"},[e("div",Tt,[Ut,e("div",Lt,[m(V(ue),{modelValue:A.value,"onUpdate:modelValue":o[5]||(o[5]=s=>A.value=s),options:J.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Location",label:"name","track-by":"id"},null,8,["modelValue","options"]),c.value.location_id_id?(l(),n("small",Pt,r(c.value.location_id_id),1)):_("",!0)]),e("div",St,[a.value.deleted_at==null?(l(),n("button",Vt,[m(v,{icon:"fa-solid fa-circle-plus"}),y(" ADD ")])):_("",!0)]),e("div",Dt,[e("div",Mt,[e("div",Et,[x(e("select",{class:"form-control form-control-sm per-page-entry",value:25,"onUpdate:modelValue":o[6]||(o[6]=s=>N.value=s),onChange:o[7]||(o[7]=(...s)=>t.perPageChange&&t.perPageChange(...s))},[(l(!0),n(L,null,D(Y.value,s=>(l(),n("option",{key:s,value:s,textContent:r(s)},null,8,Nt))),128))],544),[[se,N.value]])])])])])],40,At),e("div",It,[e("div",Ot,[e("table",Yt,[e("thead",null,[e("tr",null,[e("th",{class:p(t.textClassHead)},"Code",2),e("th",{class:p(t.textClassHead)},"Location",2),e("th",{class:p(t.iconClassHead)},null,2)])]),e("tbody",null,[(l(!0),n(L,null,D(E.value,s=>(l(),n("tr",{key:s.id,class:p(t.rowClass)},[e("td",{class:p(t.textClassBody)},r(s.location_code),3),e("td",{class:p(t.textClassBody)},r(s.location_name),3),e("td",{class:p(t.textClassBody)},[e("a",{href:"javascript:void(0)",onClick:U(I=>G(s),["prevent"]),class:"pl-2 float-end"},[m(v,{icon:"fa-solid fa-trash",class:"text-ash text-right"})],8,jt)],2)],2))),128))])])])]),e("div",Rt,[e("div",$t,[e("div",Ft," Showing "+r(d.value.from)+" to "+r(d.value.to)+" of "+r(d.value.total)+" entries ",1)]),e("div",Ht,[e("div",Wt,[e("nav",qt,[e("ul",zt,[e("li",{class:p(["page-item",d.value.current_page==1?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:o[8]||(o[8]=s=>t.setPage(d.value.current_page-1))},Gt)],2),(l(!0),n(L,null,D(d.value.last_page,(s,I)=>(l(),n(L,null,[s==1||s==d.value.last_page||Math.abs(s-d.value.current_page)<5?(l(),n("li",{class:p(["page-item",d.value.current_page==s?"active":""]),key:I},[e("a",{class:"page-link",onClick:es=>t.setPage(s)},r(s),9,Jt)],2)):_("",!0)],64))),256)),e("li",{class:p(["page-item",d.value.current_page==d.value.last_page?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:o[9]||(o[9]=s=>t.setPage(d.value.current_page+1))},Xt)],2)])])])])])])])])])])])])])]),loader:C(()=>[m(ce,{ref_key:"loading_bar",ref:i},null,512)]),_:1})}}};export{is as default};
