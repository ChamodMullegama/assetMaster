import{l as g,r as o,w as Z,B as be,o as ge,a as ye,b as l,c as ke,d as E,n as L,e as V,f as e,g as u,u as y,i as xe,h as n,j as q,k as S,m as v,p as D,v as I,q as we,s as H,t as d,F as P,x as i}from"./app-d8ea3ead.js";import{f as Te,a as Ce,b as Ee,c as Le,d as Ve,e as Se,A as De,L as Me}from"./AppLayout-a0a6f737.js";import{S as ee}from"./sweetalert2.all-0277b68c.js";import{s as M}from"./vue-multiselect.esm-0bbce239.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";import"./_plugin-vue_export-helper-c27b6911.js";const Ne={class:"header pb-6"},Ae={class:"container-fluid"},Ue={class:"header-body row"},Be={class:"col-lg-8 align-items-center py-4"},Oe=e("h6",{class:"h2 text-maroon d-inline-block mb-0"}," Task Management",-1),Ie={"aria-label":"breadcrumb",class:"d-none d-md-block"},Pe={class:"breadcrumb breadcrumb-links breadcrumb-dark"},Fe={class:"breadcrumb-item"},$e=e("li",{class:"breadcrumb-item active breadcrumb-yellow","aria-current":"page"}," Task Management ",-1),Re={class:"col-lg-4 text-right py-4"},je=["onClick"],Ge={class:"row"},qe={class:"col-lg-12"},He={class:"card shadow"},Ke={class:"pb-3 filters-margin mx-3 text-sm card-body"},Je={class:"row mb-1 mx-0"},We={class:"col-md-2 column__left___padding column__right___padding"},Xe=e("div",{for:"purchase_uom",class:"col-form-label"},"STATUS ",-1),Ye={class:"col-md-2 column__left___padding column__right___padding"},ze=e("div",{for:"purchase_uom",class:"col-form-label"},"CODE",-1),Qe={class:"col-md-2 column__left___padding column__right___padding"},Ze=e("div",{for:"purchase_uom",class:"col-form-label"},"TITLE",-1),et={class:"col-md-2 column__left___padding column__right___padding"},tt=e("div",{for:"purchase_uom",class:"col-form-label"},"LOCATION ",-1),at={class:"col-md-2 column__left___padding column__right___padding"},st=e("div",{for:"purchase_uom",class:"col-form-label"},"CATEGORY ",-1),ot={class:"col-md-1 mt-4 column__left___padding column__right___padding"},lt=["onClick"],nt={class:"flex text-muted ml-auto mt-auto"},it={class:"inline-block"},dt=["value","textContent"],ct={class:"row mx-4"},rt={class:"table-responsive"},ut={class:"table"},_t=["onClick"],mt={key:0,class:"badge badge-pill badge-info"},vt={key:1,class:"badge badge-pill badge-success"},pt={key:2,class:"badge badge-pill badge-warning"},ht={class:"flex mt-1 px-3 mx-1 card-footer table-footer align-items-center"},ft={class:"col-sm-12 col-md-6 p-0"},bt={class:"dataTables_info column__left___padding",id:"DataTables_Table_0_info",role:"status","aria-live":"polite"},gt={class:"col-sm-12 col-md-6 p-0"},yt={class:"dataTables_paginate paging_simple_numbers column__right___padding",id:"DataTables_Table_0_paginate"},kt={"aria-label":"Page navigation",style:{float:"right"}},xt={class:"pagination"},wt=e("i",{class:"fa-solid fa-angles-left"},null,-1),Tt=[wt],Ct=["onClick"],Et=e("i",{class:"fa-solid fa-angles-right"},null,-1),Lt=[Et],Vt={class:"modal fade",id:"newTaskModal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"newTaskModal","aria-hidden":"true"},St={class:"modal-dialog modal-dialog-centered modal-md",role:"document"},Dt={class:"modal-content"},Mt={class:"modal-header"},Nt=e("h5",{class:"modal-title font-weight-bolder breadcrumb-yellow text-gradient title_modal",id:"add_brandLabel"}," NEW TASK",-1),At={type:"button",class:"close btn","data-dismiss":"modal","aria-label":"Close"},Ut={"aria-hidden":"true"},Bt={class:"modal-body pb-2 pt-0 mt-0"},Ot={class:""},It={class:""},Pt=["onSubmit"],Ft={class:"row mb-1"},$t=e("div",{for:"title",class:"col-md-3 col-form-label"},"TITLE",-1),Rt={class:"col-md-9"},jt={key:0,id:"msg_title",class:"text-danger form-text text-error-msg error"},Gt={class:"row mb-1"},qt=e("div",{for:"title",class:"col-md-3 col-form-label"},"LOCATION",-1),Ht={class:"col-md-9"},Kt={key:0,id:"msg_location_id_id",class:"text-danger form-text text-error-msg error"},Jt={class:"row mb-1"},Wt=e("div",{for:"title",class:"col-md-3 col-form-label"},"CATEGORY",-1),Xt={class:"col-md-9"},Yt={key:0,id:"msg_category_id",class:"text-danger form-text text-error-msg error"},zt={class:"row mb-1"},Qt=e("div",{for:"exp_date",class:"col-md-3 col-form-label"},"EXP DATE",-1),Zt={class:"col-md-9"},ea={key:0,id:"msg_exp_date",class:"text-danger form-text text-error-msg error"},ta={class:"text-right mt-2"},aa={type:"submit",class:"btn btn-round btn-outline-primary btn-sm mb-0"},sa={class:"modal fade",id:"importTasks","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"importTasks","aria-hidden":"true"},oa={class:"modal-dialog modal-dialog-centered modal-md",role:"document"},la={class:"modal-content"},na={class:"modal-header"},ia=e("h5",{class:"modal-title font-weight-bolder breadcrumb-yellow text-gradient title_modal",id:"add_brandLabel"}," Import Tasks ",-1),da={type:"button",class:"close btn","data-dismiss":"modal","aria-label":"Close"},ca={"aria-hidden":"true"},ra={class:"p-1 modal-body"},ua={class:"card-plain"},_a={key:0,class:"m-2 card-body"},ma={class:"mb-1 row"},va=e("div",{for:"barcode",class:"col-md-12 col-form-label"}," EXCEL FILE ",-1),pa={class:"col-md-12"},ha={class:"error"},fa={key:0,class:"mt-1 text-sm text-danger form-text text-error-msg error"},ba={class:"mt-2 text-right"},ga={type:"submit",class:"mb-0 btn btn-outline-primary btn-sm btn-round"},ya={key:1,class:"m-2 card-body"},ka=e("div",{class:"loading"},[e("div",{class:"loading-text"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"sr-only"},"Loading...")]),e("div",{class:"text-primary"},"Uploading...")])],-1),xa=[ka],Ma={__name:"index",setup(wa){g.add(Te),g.add(Ce),g.add(Ee),g.add(Le),g.add(Ve),g.add(Se);const k=o("text-start text-uppercase");o("text-center text-uppercase");const x=o("text-start");o("text-center");const te=o("text-center"),ae=o("text-center"),se=o("cursor-pointer"),K=o(null),N=o(1),oe=o([25,50,100]),A=o(25),c=o({}),p=o({}),F=o([]),J=o([]),f=o(null),w=o(null),U=o(null),B=o(null),r=o({}),R=o([]),le=o(0),ne=o(null),T=o(""),b=o(null),ie=o([{value:3,name:"REJECT"},{value:2,name:"COMPLETED"},{value:1,name:"PENDING"}]),W=o(null),_=o({}),h=o(null),O=()=>{_.value={},W.value=null},X=a=>{if(O(),!(a.response&&a.response.data))return;const{message:s}=a.response.data;ce(s)},Y=a=>{if(O(),!(a.response&&a.response.data))return;const{message:s,errors:m}=a.response.data;if(W.value=s,m)for(const t in m)_.value[t]=m[t][0]},de=a=>{ee.fire({icon:"success",title:"Success",text:a,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},ce=a=>{ee.fire({icon:"error",title:"Oops...",text:a,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},re=async()=>{L(()=>{h.value.start()});try{const a=(await V.get(route("task.all"))).data;F.value=a.data,c.value=a.meta,h.value.finish(),L(()=>{h.value.finish()})}catch(a){Y(a),L(()=>{h.value.finish()})}},C=async()=>{L(()=>{h.value.start()});try{const a=(await V.get(route("task.all"),{params:{page:N.value,per_page:A.value,"filter[search]":K.value,search_task_code:r.value.code,search_task_title:r.value.title,search_task_location:r.value.location,search_task_category:r.value.category,search_task_status:r.value.status}})).data;F.value=a.data,c.value=a.meta,L(()=>{h.value.finish()})}catch(a){X(a)}},j=async a=>{N.value=a,C()},G=()=>{N.value=1,C()},ue=async()=>{C()};Z(()=>{const a=U.value;a&&(r.value.category=a.id);const s=B.value;s&&(r.value.location=s.id),b.value&&(r.value.status=b.value.value),(a||s||b.value)&&G()});const _e=()=>{r.value={},U.value=null,B.value=null,b.value=null,C()},me=async()=>{O();try{f.value&&(f.value.id=="all"?p.value.category_id=0:p.value.category_id=f.value.id),w.value&&(p.value.location_id=w.value.id),T.value&&(p.value.exp_date=T.value);const a=(await V.post(route("task.store"),p.value)).data;window.location.href=route("task.edit",a.id),$("#newTaskModal").modal("hide"),p.value={},de("Task created successfully")}catch(a){X(a)}},ve=async a=>{O();try{window.location.href=route("task.edit",a)}catch(s){Y(s)}},pe=()=>{h.value.start(),f.value=null,w.value=null,p.value={},$("#newTaskModal").modal("show"),h.value.finish()},he=async()=>{try{const a=await V.get(route("location.all"));R.value=a.data.data}catch(a){console.error(a.message)}},fe=async()=>{try{const a=await V.get(route("category.all"));J.value=a.data.data}catch(a){console.error(a.message)}},z=be(()=>[{id:"all",name:"ALL"},...J.value]);return ge(()=>{re(),he(),fe(),T.value=new Date().toISOString().substr(0,10)}),Z([K,N,A],()=>{C()}),(a,s)=>{const m=ye("font-awesome-icon");return l(),ke(De,{title:"Task Management"},{header:E(()=>[e("div",Ne,[e("div",Ae,[e("div",Ue,[e("div",Be,[Oe,e("nav",Ie,[e("ol",Pe,[e("li",Fe,[u(y(xe),{href:"/"},{default:E(()=>[u(m,{icon:"fa-solid fa-house",class:"text-maroon"})]),_:1})]),$e])])]),e("div",Re,[a.can("update_location_asset")?(l(),n("a",{key:0,href:"javascript:void(0)",onClick:S(pe,["prevent"]),class:"btn btn-sm btn-neutral float-end text-maroon"},[u(m,{icon:"fa-solid fa-circle-plus"}),q(" ADD NEW ")],8,je)):v("",!0)])])])])]),content:E(()=>[e("div",Ge,[e("div",qe,[e("div",He,[e("div",Ke,[e("div",null,[e("div",Je,[e("div",We,[Xe,u(y(M),{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=t=>b.value=t),options:ie.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Status",label:"name","track-by":"value"},null,8,["modelValue","options"])]),e("div",Ye,[ze,D(e("input",{type:"text",class:"form-control form-control-sm",name:"code",id:"code","onUpdate:modelValue":s[1]||(s[1]=t=>r.value.code=t),placeholder:"Code",onKeyup:G},null,544),[[I,r.value.code]])]),e("div",Qe,[Ze,D(e("input",{type:"text",class:"form-control form-control-sm",name:"code",id:"code","onUpdate:modelValue":s[2]||(s[2]=t=>r.value.title=t),placeholder:"Title",onKeyup:G},null,544),[[I,r.value.title]])]),e("div",et,[tt,u(y(M),{modelValue:B.value,"onUpdate:modelValue":s[3]||(s[3]=t=>B.value=t),options:R.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Location",label:"name_code","track-by":"id"},null,8,["modelValue","options"])]),e("div",at,[st,u(y(M),{modelValue:U.value,"onUpdate:modelValue":s[4]||(s[4]=t=>U.value=t),options:z.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Category",label:"name","track-by":"id"},null,8,["modelValue","options"])]),e("div",ot,[e("a",{href:"javascript:void(0)",onClick:S(_e,["prevent"]),class:"btn btn-sm btn-ash float-end mt-2 pt-2"}," CLEAR ",8,lt)]),e("div",nt,[e("div",it,[D(e("select",{class:"form-control form-control-sm per-page-entry",value:25,"onUpdate:modelValue":s[5]||(s[5]=t=>A.value=t),onChange:ue},[(l(!0),n(P,null,H(oe.value,t=>(l(),n("option",{key:t,value:t,textContent:d(t)},null,8,dt))),128))],544),[[we,A.value]])])])])])]),e("div",ct,[e("div",rt,[e("table",ut,[e("thead",null,[e("tr",null,[e("th",{class:i(te.value),style:{width:"120px"}},"Status",2),e("th",{class:i(k.value)},"Code",2),e("th",{class:i(k.value)},"Title",2),e("th",{class:i(k.value)},"Location",2),e("th",{class:i(k.value)},"Category",2),e("th",{class:i(k.value)},"Exp Date",2)])]),e("tbody",null,[(l(!0),n(P,null,H(F.value,t=>(l(),n("tr",{key:t.id,class:i(se.value),onClick:S(Q=>ve(t.id),["prevent"])},[e("td",{class:i(ae.value)},[t.status==0?(l(),n("span",mt,"PENDING")):v("",!0),t.status==1?(l(),n("span",vt,"COMPLETED")):v("",!0),t.status==2?(l(),n("span",pt,"REJECT")):v("",!0)],2),e("td",{class:i(x.value)},d(t.code),3),e("td",{class:i(x.value)},d(t.title),3),e("td",{class:i(x.value)},d(t.location_name),3),e("td",{class:i(x.value)},d(t.category_name),3),e("td",{class:i(x.value)},d(t.exp_date),3)],10,_t))),128))])])])]),e("div",ht,[e("div",ft,[e("div",bt," Showing "+d(c.value.from)+" to "+d(c.value.to)+" of "+d(c.value.total)+" entries ",1)]),e("div",gt,[e("div",yt,[e("nav",kt,[e("ul",xt,[e("li",{class:i(["page-item",c.value.current_page==1?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:s[6]||(s[6]=t=>j(c.value.current_page-1))},Tt)],2),(l(!0),n(P,null,H(c.value.last_page,(t,Q)=>(l(),n(P,null,[t==1||t==c.value.last_page||Math.abs(t-c.value.current_page)<5?(l(),n("li",{class:i(["page-item",c.value.current_page==t?"active":""]),key:Q},[e("a",{class:"page-link",onClick:Ta=>j(t)},d(t),9,Ct)],2)):v("",!0)],64))),256)),e("li",{class:i(["page-item",c.value.current_page==c.value.last_page?"disabled":""])},[e("a",{class:"page-link",href:"javascript:void(0)",onClick:s[7]||(s[7]=t=>j(c.value.current_page+1))},Lt)],2)])])])])])])])])]),modals:E(()=>[e("div",Vt,[e("div",St,[e("div",Dt,[e("div",Mt,[Nt,e("button",At,[e("span",Ut,[u(m,{icon:"fa-solid fa-xmark"})])])]),e("div",Bt,[e("div",Ot,[e("div",It,[e("form",{role:"form text-left",onSubmit:S(me,["prevent"]),enctype:"multipart/form-data"},[e("div",Ft,[$t,e("div",Rt,[D(e("input",{type:"text",class:"form-control form-control-sm",name:"title",id:"title","onUpdate:modelValue":s[8]||(s[8]=t=>p.value.title=t),placeholder:"Title",required:""},null,512),[[I,p.value.title]]),_.value.title?(l(),n("small",jt,d(_.value.title),1)):v("",!0)])]),e("div",Gt,[qt,e("div",Ht,[u(y(M),{modelValue:w.value,"onUpdate:modelValue":s[9]||(s[9]=t=>w.value=t),options:R.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,placeholder:"Select Location",label:"name_code","track-by":"id"},null,8,["modelValue","options"]),_.value.location_id_id?(l(),n("small",Kt,d(_.value.location_id_id),1)):v("",!0)])]),e("div",Jt,[Wt,e("div",Xt,[u(y(M),{modelValue:f.value,"onUpdate:modelValue":s[10]||(s[10]=t=>f.value=t),options:z.value,showLabels:!1,"close-on-select":!0,"clear-on-select":!1,searchable:!0,"preselect-first":!0,placeholder:"Select Category",label:"name","track-by":"id"},null,8,["modelValue","options"]),_.value.category_id?(l(),n("small",Yt,d(_.value.category_id),1)):v("",!0)])]),e("div",zt,[Qt,e("div",Zt,[D(e("input",{type:"date",class:"form-control form-control-sm",name:"exp_date",id:"exp_date","onUpdate:modelValue":s[11]||(s[11]=t=>T.value=t),placeholder:"Name",required:""},null,512),[[I,T.value]]),_.value.exp_date?(l(),n("small",ea,d(_.value.exp_date),1)):v("",!0)])]),e("div",ta,[e("button",aa,[u(m,{icon:"fa-solid fa-floppy-disk"}),q(" CREATE ")])])],40,Pt)])])])])])]),e("div",sa,[e("div",oa,[e("div",la,[e("div",na,[ia,e("button",da,[e("span",ca,[u(m,{icon:"fa-solid fa-xmark"})])])]),e("div",ra,[e("div",ua,[le.value==0?(l(),n("div",_a,[e("form",{role:"form text-left",onSubmit:s[13]||(s[13]=S((...t)=>a.importTasksFile&&a.importTasksFile(...t),["prevent"])),enctype:"multipart/form-data"},[e("div",ma,[va,e("div",pa,[e("input",{type:"file",ref:"file",class:"form-control form-control-sm",onInput:s[12]||(s[12]=t=>ne.value=t.target.files[0])},null,544),e("div",ha,[_.value.task_file?(l(),n("small",fa,d(_.value.task_file),1)):v("",!0)])])]),e("div",ba,[e("button",ga,[u(m,{icon:"fa-solid fa-floppy-disk"}),q(" SUBMIT ")])])],32)])):(l(),n("div",ya,xa))])])])])])]),loader:E(()=>[u(Me,{ref_key:"loading_bar",ref:h},null,512)]),_:1})}}};export{Ma as default};
